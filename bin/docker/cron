#!/usr/bin/env bash

[ -z "$1" ] && echo "Please specify a command (ex. start|stop)" && exit

if [ -z "${PROJECT_ROOT}" ]; then
    export PROJECT_ROOT="$( cd "$(dirname "$0")/../../" >/dev/null 2>&1 ; pwd -P )"
fi

if [[ ${1} == "setup" ]]; then
    "${PROJECT_ROOT}"bin/docker/docker-compose exec server_cron_manager bin/console app:cron:install
fi

if [[ ${1} == "start" ]]; then
    "${PROJECT_ROOT}"bin/docker/docker-compose exec server_cron_manager crond -f
fi

if [[ ${1} == "stop" ]]; then
     "${PROJECT_ROOT}"bin/docker/docker-compose exec server_cron_manager pkill crond
fi